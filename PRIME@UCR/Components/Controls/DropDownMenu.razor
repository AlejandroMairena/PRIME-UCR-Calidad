@typeparam T
@inherits InputBase<T>

<div class="form-group">
    <label>@Label</label>
    <select class="@($"custom-select {ValidationCssClass}")"
            value="@SelectedValue"
            @onchange="OnChangeEvent">
        @if (!String.IsNullOrEmpty(DefaultText))
        {
            <option value="@(-1)" selected>@DefaultText</option>
        }
        @for (int i = 0; i < Data.Count; ++i)
        {
            @if (i == _index)
            {
                @if (TextExpression != null && TextProperty != null)
                {
                    throw new InvalidOperationException("Only select one option of: TextProperty or TextExpression ");
                }
                if (TextExpression != null)
                {
                    <option selected value="@i">@(TextExpression(Data[i]))</option>
                }
                else if (TextProperty != null)
                {
                    <option selected value="@i">@GetText(Data[i])</option>
                }
                else
                {
                    throw new InvalidOperationException("There must be an option: TextProperty or TextExpression");
                }
            }
            else
            {
                <option value="@i">@GetText(Data[i])</option>
            }
        }
    </select>
    <ValidationMessage For="ValueExpression" />
</div>