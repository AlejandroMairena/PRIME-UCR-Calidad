@inherits AllChecklistSingleIncidentBase
@using PRIME_UCR.Components.Controls
@using BlazorTable
@using PRIME_UCR.Domain.Models.CheckLists;
@using PRIME_UCR.Components.CheckLists
@attribute [Authorize]
<link href="css/Checklist.css" rel="stylesheet" />


<div>
    @if (instancelists == null)
    {
        <p><em class="nav-link">Cargando listas de chequeo asignadas.</em></p> }
    else
    {
        if (instancelists.Count() == 0)
        {
            <p><em class="nav-link">No se ha asignado ninguna lista, presione el boton + para asignar alguna.</em></p> }
        else
        {
            <div class="rounded" style="background-color: white;padding-left: 10px;padding-right: 10px; padding-top:10px;">
                <EditForm Model="instancelists">
                    <Table TableItem="InstanceChecklist" Items="instancelists" PageSize="12">

                        <Column TableItem="InstanceChecklist" Title="Nombre" Field="@( x => x.PlantillaId)" Width="25%">
                            <Template Context="tempList">
                                <a href='@string.Format("incidents/{0}/{1}", @tempList.IncidentCod,@tempList.PlantillaId)'>@GetName2(tempList.PlantillaId)</a>
                            </Template>

                        </Column>
                        <Column TableItem="InstanceChecklist" Title="Tipo" Field="@(x => x.PlantillaId)" Width="20%">
                            <Template Context="tempList">
                                <a>
                                    @GetTipo2(tempList.PlantillaId)
                                </a>
                            </Template>
                        </Column>
                        <Column TableItem="InstanceChecklist" Title="Descripción" Field="@(x => x.PlantillaId)" Width="20%">
                            <Template Context="tempList">
                                <a>
                                    @GetDescp2(tempList.PlantillaId)
                                </a>
                            </Template>
                        </Column>
                        <Column TableItem="InstanceChecklist" Title="Completados" Field="@(x => x.PlantillaId)" Width="5%">
                            <Template Context="tempList">
                                <a>
                                    @GetSpecificSummary(tempList.PlantillaId)
                                </a>
                            </Template>
                        </Column>

                        <EmptyDataTemplate>
                            <div class="text-center">
                                No se encontraron listas de chequeo instanciadaa
                            </div>
                        </EmptyDataTemplate>
                        <Pager ShowPageNumber="true" />
                    </Table>
                </EditForm>
                </div>
                }
                }
            </div>