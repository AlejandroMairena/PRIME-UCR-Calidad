@inherits ChecklistToAsignBase
@using PRIME_UCR.Components.Controls
@using BlazorTable
@using PRIME_UCR.Domain.Models.CheckLists;
@attribute [Authorize]
<link href="css/Checklist.css" rel="stylesheet" />


<Loading IsLoading="lists == null">
    @if (llenado == false)
    {
        Llenar();//llena todo el vector en false
        //AsignIncidentCode("2020-11-04-0001-IT-TER");
    }
     
    <div  class="rounded" style="background-color: white;padding-left: 10px;padding-right: 10px; padding-top:10px;">
        <h5>Listas de chequeo disponibles</h5>
        <EditForm Model="lists">
            <Table TableItem="CheckList" Items="lists" PageSize="12">
                <Column TableItem="CheckList" Title="" Field="@(tempList => lists)" Width="1%">
                    <Template Context="checkbox">
                        <center>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck @checkbox.Id" checked="@TempDetail[TempsIds.IndexOf(checkbox.Id)].IsDone" @onchange="((ChangeEventArgs c) => CheckIempList(checkbox.Id,c))"/> @* @bind="TempDetail[TempsIds.IndexOf(checkbox.Id)].IsDone" @onclick="upate_Count" *@
                                <label class="custom-control-label" for="customCheck @checkbox.Id"></label>
                            </div>
                        </center>
                    </Template>
                </Column>

                <Column TableItem="CheckList" Title="Nombre" Field="@( x => x.Nombre)" Width="30%" />
                <Column TableItem="CheckList" Title="Tipo" Field="@(x => x.Tipo)" Width="20%" />
                <Column TableItem="CheckList" Title="Descripción" Field="@(x => x.Descripcion)" Width="20%" />

                <EmptyDataTemplate>
                    <div class="text-center">
                        No se encontraron listas de chequeo disponibles
                    </div>
                </EmptyDataTemplate>

            </Table>
        </EditForm>
    </div>
    <br />
    <div  class="rounded" style="background-color: white;padding-left: 10px;padding-right: 10px;padding-top:10px;">
        <h5>Listas de chequeo instanciadas</h5>
        <EditForm Model="lists">
            <Table TableItem="CheckList" Items="lists" PageSize="12">
                <Column TableItem="CheckList" Title="Nombre" Field="@( x => x.Nombre)" Width="30%">
                    <Template Context="tempList">
                        @if (TempDetail[TempsIds.LastIndexOf(tempList.Id)].IsDone)
                        {
                            <a>@tempList.Nombre</a>
                        }
                    </Template>
                </Column>
                <Column TableItem="CheckList" Title="Tipo" Field="@(x => x.Tipo)" Width="20%">
                    <Template Context="tempList">
                        @if (TempDetail[TempsIds.LastIndexOf(tempList.Id)].IsDone)
                        {
                            <a>@tempList.Tipo</a>
                        }
                    </Template>
                </Column>
                <Column TableItem="CheckList" Title="Descripción" Field="@(x => x.Descripcion)" Width="20%">
                    <Template Context="tempList">
                        @if (TempDetail[TempsIds.LastIndexOf(tempList.Id)].IsDone)
                        {
                            <a>@tempList.Descripcion</a>
                        }
                    </Template>
                </Column>
                <EmptyDataTemplate>
                    <div class="text-center">
                        No se han asignado listas de chequeo
                    </div>
                </EmptyDataTemplate>
            </Table>
        </EditForm>
    </div>
    <div align="center">
        <button type="submit" class="btn btn-primary" id="BP_LC0" disabled="@dont_save">Guardar</button>
        <a class="btn btn-outline-secondary" @onclick="Dispose" id="a_LC3" >Cancelar</a>
    </div>
</Loading>
