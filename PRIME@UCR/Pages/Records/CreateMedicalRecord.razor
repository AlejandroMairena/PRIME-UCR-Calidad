@page "/create-medical-record"
@using PRIME_UCR.Domain.Models
@using PRIME_UCR.Domain.Models.MedicalRecords
@inject PRIME_UCR.Application.Services.MedicalRecords.IMedicalRecordService medical_record_service
<h1>Crear Expediente Paciente</h1>

<MedicalRecordForm Expediente="@expediente" Submit_msg="Crear Expediente"
                   OnValidSubmit="@create_medical_record"></MedicalRecordForm>

@code {
    //public List<string> medicos;
    //public List<string> pacientes;

    protected override void OnInitialized()
    {

        //do necessary query to show the true info.
        //medicos = new List<string>() { "Paco", "Pedro", "Pancho", "Quijote" };
        //pacientes = new List<string>() { "Paco", "Pedro", "Pancho", "Quijote" };

        base.OnInitialized();
    }

    Expediente expediente = new Expediente();

    private void create_medical_record()
    {
        expediente.FechaCreacion = DateTime.Now;

        medical_record_service.InsertAsync(expediente); 
        Console.WriteLine(expediente);
    }

}
