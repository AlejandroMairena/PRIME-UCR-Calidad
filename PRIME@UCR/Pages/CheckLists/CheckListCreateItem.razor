@page "/checklist/createItem"
@using PRIME_UCR.Components.Controls
@inherits CheckListCreateItemBase
@* @layout CheckListLayout *@
@* @attribute [Authorize(Roles = "coordinador tecnico medico")] *@
@* @attribute [Authorize(Policy = "check-list")] *@
@attribute [Authorize]

@* Simple page to test item creation 
    TO DO: Add references between a checklist and its items
    *@




<link href="css/Checklist.css" rel="stylesheet" />

<h1>Plantillas de listas de chequeo</h1>
<hr />
<div class="row">
    <div class="col-lg-3 mb-4" >@*id="colALL_LC"*@
        <div class="container" >@*id="contAll_LC"*@
            <h6>Listas de chequeo Existentes</h6> @* Mejorar diseño de interfaz*@
            <div>
                <ul class="nav nav-pills flex-column">
                    @*<ul class="ml-4" type="square">*@
                    <li class="nav-item">
                        @*ver lisatas de chequeo ya creadas*@

                        @if (lists != null && lists.Count() > 0)
                        {
                            @foreach (var tempList in lists)
                            {
                            <li class="mt-2">
                                <NavLink href='@string.Format("checklist/{0}", @tempList.Id)' class="nav-link" id="a_LC4">
                                    •  @tempList.Nombre
                                </NavLink>
                            </li>

                        }
                        }
                        </li>
                    </ul>
                </div>
            </div>
            </div>

        @*
            Story: PIG01IIC20-309
            Tasks: PIG01IIC20-399, PIG01IIC20-346, PIG01IIC20-450
            Devs: Stephanie Leiton, Juan Pablo Gamboa
        *@
        <div class="col">
            <div class="container">
                <h3>Crear item de lista de chequeo</h3>
                <br />
                <EditForm EditContext="@editContext" OnValidSubmit="@HandleValidSubmit">
                    @* to do: <EditForm> Crear lista de Chequeo*@
                    <label for="name">Nombre:<span style=" color:red">*&nbsp;&nbsp;&nbsp;&nbsp;</span></label>
                    <InputText id="name" @bind-Value="item.Nombre" class="form-control" />
                    <ValidationMessage For="@(() => item.Nombre)" />
                    <br />
                    <label for="description">Descripción: </label>
                    <InputTextArea id="description" @bind-Value="item.Descripcion" class="form-control" />
                    <br />
                    <div class="form-row">
                        <div class="col-6">
                            <label for="order">Orden:<span style=" color:red">*</span></label>
                            <InputNumber id="order" @bind-Value="item.Orden" class="form-control" />
                        </div>
                    </div>
                    <br />
                    <p style="color:red">* Campo requerido</p>

                    <div align="center">
                        <button type="submit" class="btn btn-primary" disabled="@formInvalid" id="BP_LC0">Guardar Lista</button> @*to do: ir a la recien creada *@
                        <a class="btn btn-outline-secondary" href='@string.Format("checklist")' id="a_LC3">Cancelar</a> @*to do: ir a la anterior  *@
                    </div>
                </EditForm>
            </div>
            <br />
        </div>
    </div>